<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Moja e-przychodnia</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" th:href="@{/css/index.css}" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>


    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js" crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>
    <style>
        table {
            height: 30px;
        }

        select {
            height: 30px;
            width: 90px;
            border: 1px solid #ccc;
            text-align: center
        }

        .time {
            background-color: #eee;
            height: 30px;
            width: 33px;
            width: fit-content;
            padding: 0px 0px 0px 10px;
            border: 1px solid #ccc
        }


        select option:disabled {
            background: lightgrey;
        }

        select option:not(:disabled) {
            font-weight: bold;
        }
    </style>
</head>

<body>
    <header th:insert="fragments/general.html :: header"> </header>
    <div th:insert="fragments/general.html :: sec1"> </div>
    <div class="right">


        <form method="post" th:action="@{/updateType/{bid}(bid=${booking.id})}">
            <h2 th:text="${doctor.degree}+' '+${doctor.name}+' '+${doctor.surname}"></h2>
            <h4 th:text="'specjalizacja:  '+${doctor.specialization}"></h4>
            <h4 th:text="'Data wizyty:  '+${#dates.format(booking.date, 'dd.MM.yyyy')}"></h4>
            <input type="hidden" th:name="bid" th:value="${booking.id}" /><br>


            <table>
                <tr>
                    <td>
                        <label for="time" style="font-size: small; font-weight: normal;  margin-right: 25px;">Wybierz
                            godzinę wizyty:</label>
                    </td>
                    <td class="time">
                        <span class="glyphicon glyphicon-time"></span>
                        <select class="form-select form-select-lg" id="bookingTime" th:name="time"
                            aria-label="label for the select">
                            <option>---</option>
                            <option value="15:00" th:disabled="${bookingRepo.existsByIdDoctorAndDateAndTime
                                    (booking.idDoctor, booking.date, '15:00')}">15:00</option>
                            <option value="15:30" th:disabled="${bookingRepo.existsByIdDoctorAndDateAndTime
                                    (booking.idDoctor, booking.date, '15:30')}">15:30</option>
                            <option value="16:00" th:disabled="${bookingRepo.existsByIdDoctorAndDateAndTime
                                (booking.idDoctor, booking.date, '16:00')}">16:00</option>
                            <option value="16:30" th:disabled="${bookingRepo.existsByIdDoctorAndDateAndTime
                                (booking.idDoctor, booking.date, '16:30')}">16:30</option>
                        </select>
                    </td>
                </tr>
            </table><br>

            <button type="submit" class="btn btn-primary">Przejdź dalej aby wybrać typ wizyty.</button>
        </form>

    </div>
</body>

</html>